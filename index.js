const _0x455a73=_0xf8d5;(function(_0x302a58,_0x32f6da){const _0x3ffae8=_0xf8d5,_0xfaf338=_0x302a58();while(!![]){try{const _0x338f6b=parseInt(_0x3ffae8(0x1ef))/0x1*(parseInt(_0x3ffae8(0x1bb))/0x2)+-parseInt(_0x3ffae8(0x1f4))/0x3*(-parseInt(_0x3ffae8(0x1e8))/0x4)+-parseInt(_0x3ffae8(0x1df))/0x5*(parseInt(_0x3ffae8(0x1aa))/0x6)+parseInt(_0x3ffae8(0x17c))/0x7*(parseInt(_0x3ffae8(0x1d1))/0x8)+-parseInt(_0x3ffae8(0x18f))/0x9*(parseInt(_0x3ffae8(0x1a1))/0xa)+-parseInt(_0x3ffae8(0x17f))/0xb*(parseInt(_0x3ffae8(0x1e5))/0xc)+-parseInt(_0x3ffae8(0x198))/0xd;if(_0x338f6b===_0x32f6da)break;else _0xfaf338['push'](_0xfaf338['shift']());}catch(_0x59e778){_0xfaf338['push'](_0xfaf338['shift']());}}}(_0x1bd2,0x46b53));const os=require('os'),http=require(_0x455a73(0x1ed)),fs=require('fs'),axios=require(_0x455a73(0x1ec)),net=require(_0x455a73(0x1af)),path=require(_0x455a73(0x175)),crypto=require(_0x455a73(0x1c7)),{Buffer}=require(_0x455a73(0x1d9)),{exec,execSync}=require(_0x455a73(0x1ac)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x455a73(0x1d7)][_0x455a73(0x1de)]||_0x455a73(0x1d3),NEZHA_SERVER=process['env'][_0x455a73(0x1ca)]||'',NEZHA_PORT=process[_0x455a73(0x1d7)][_0x455a73(0x19d)]||'',NEZHA_KEY=process[_0x455a73(0x1d7)][_0x455a73(0x1e1)]||'',DOMAIN=process[_0x455a73(0x1d7)]['DOMAIN']||_0x455a73(0x187),AUTO_ACCESS=process['env'][_0x455a73(0x1e4)]||!![],WSPATH=process['env'][_0x455a73(0x19e)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x455a73(0x1d7)]['SUB_PATH']||'sub',NAME=process['env']['NAME']||'',PORT=process['env'][_0x455a73(0x182)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2aab56=_0x455a73;try{const _0x39245a=await axios['get'](_0x2aab56(0x185)),_0x1d2705=_0x39245a[_0x2aab56(0x1d5)];ISP=(_0x1d2705[_0x2aab56(0x179)]+'-'+_0x1d2705[_0x2aab56(0x1b1)])[_0x2aab56(0x1c4)](/ /g,'_');}catch(_0xf965a8){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x1ddb01,_0x6d24e4)=>{const _0x44285b=_0x455a73;if(_0x1ddb01[_0x44285b(0x1f2)]==='/'){const _0x490ac5=path[_0x44285b(0x194)](__dirname,_0x44285b(0x1ee));fs[_0x44285b(0x174)](_0x490ac5,_0x44285b(0x1e3),(_0x1ec834,_0x9f6d68)=>{const _0x113e35=_0x44285b;if(_0x1ec834){_0x6d24e4['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x6d24e4[_0x113e35(0x186)](_0x113e35(0x1e7));return;}_0x6d24e4[_0x113e35(0x1e2)](0xc8,{'Content-Type':_0x113e35(0x18e)}),_0x6d24e4[_0x113e35(0x186)](_0x9f6d68);});return;}else{if(_0x1ddb01[_0x44285b(0x1f2)]==='/'+SUB_PATH){const _0x5bb9e3=NAME?NAME+'-'+ISP:ISP,_0x2b0900=_0x44285b(0x1be)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x44285b(0x1a7)+DOMAIN+_0x44285b(0x177)+WSPATH+'#'+_0x5bb9e3,_0x2cbd3e=_0x44285b(0x181)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x44285b(0x1a7)+DOMAIN+_0x44285b(0x177)+WSPATH+'#'+_0x5bb9e3,_0x3c174b=_0x2b0900+'\x0a'+_0x2cbd3e,_0x173c67=Buffer['from'](_0x3c174b)[_0x44285b(0x1d0)](_0x44285b(0x1f1));_0x6d24e4['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x6d24e4['end'](_0x173c67+'\x0a');}else _0x6d24e4[_0x44285b(0x1e2)](0x194,{'Content-Type':_0x44285b(0x1d8)}),_0x6d24e4[_0x44285b(0x186)](_0x44285b(0x19f));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x455a73(0x1c4)](/-/g,''),DNS_SERVERS=[_0x455a73(0x18c),_0x455a73(0x199)];function resolveHost(_0x184d41){return new Promise((_0x59ef61,_0xecb09e)=>{const _0xec696e=_0xf8d5;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xec696e(0x18d)](_0x184d41)){_0x59ef61(_0x184d41);return;}let _0x209a08=0x0;function _0x1f75b0(){const _0x466199=_0xec696e;if(_0x209a08>=DNS_SERVERS[_0x466199(0x1c5)]){_0xecb09e(new Error(_0x466199(0x1bd)+_0x184d41+_0x466199(0x178)));return;}const _0x5ac2b8=DNS_SERVERS[_0x209a08];_0x209a08++;const _0x4ca9d4='https://dns.google/resolve?name='+encodeURIComponent(_0x184d41)+'&type=A';axios['get'](_0x4ca9d4,{'timeout':0x1388,'headers':{'Accept':_0x466199(0x1a5)}})['then'](_0x39e127=>{const _0x40f075=_0x466199,_0x563274=_0x39e127[_0x40f075(0x1d5)];if(_0x563274[_0x40f075(0x1a8)]===0x0&&_0x563274[_0x40f075(0x1ce)]&&_0x563274['Answer']['length']>0x0){const _0x34a07b=_0x563274[_0x40f075(0x1ce)][_0x40f075(0x184)](_0x271b1f=>_0x271b1f['type']===0x1);if(_0x34a07b){_0x59ef61(_0x34a07b[_0x40f075(0x1d5)]);return;}}_0x1f75b0();})['catch'](_0x2c594d=>{_0x1f75b0();});}_0x1f75b0();});}function handleVlessConnection(_0x2583a3,_0x190329){const _0x582478=_0x455a73,[_0x3a4a0f]=_0x190329,_0x39cb23=_0x190329['slice'](0x1,0x11);if(!_0x39cb23[_0x582478(0x1cf)]((_0x3aa5a0,_0x644d74)=>_0x3aa5a0==parseInt(uuid[_0x582478(0x1bf)](_0x644d74*0x2,0x2),0x10)))return![];let _0x5e85c7=_0x190329['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x84ed25=_0x190329[_0x582478(0x1e0)](_0x5e85c7,_0x5e85c7+=0x2)[_0x582478(0x189)](0x0),_0x505374=_0x190329[_0x582478(0x1e0)](_0x5e85c7,_0x5e85c7+=0x1)[_0x582478(0x1d6)](),_0x6e6dd3=_0x505374==0x1?_0x190329['slice'](_0x5e85c7,_0x5e85c7+=0x4)[_0x582478(0x194)]('.'):_0x505374==0x2?new TextDecoder()[_0x582478(0x1a4)](_0x190329[_0x582478(0x1e0)](_0x5e85c7+0x1,_0x5e85c7+=0x1+_0x190329[_0x582478(0x1e0)](_0x5e85c7,_0x5e85c7+0x1)[_0x582478(0x1d6)]())):_0x505374==0x3?_0x190329[_0x582478(0x1e0)](_0x5e85c7,_0x5e85c7+=0x10)['reduce']((_0x13a876,_0x599054,_0x530718,_0x53061a)=>_0x530718%0x2?_0x13a876['concat'](_0x53061a[_0x582478(0x1e0)](_0x530718-0x1,_0x530718+0x1)):_0x13a876,[])[_0x582478(0x1ba)](_0x356802=>_0x356802[_0x582478(0x189)](0x0)[_0x582478(0x1d0)](0x10))[_0x582478(0x194)](':'):'';_0x2583a3[_0x582478(0x1c3)](new Uint8Array([_0x3a4a0f,0x0]));const _0x581026=createWebSocketStream(_0x2583a3);return resolveHost(_0x6e6dd3)[_0x582478(0x193)](_0x2c9dd9=>{const _0x5a04c7=_0x582478;net[_0x5a04c7(0x196)]({'host':_0x2c9dd9,'port':_0x84ed25},function(){const _0x3377f1=_0x5a04c7;this[_0x3377f1(0x1b9)](_0x190329[_0x3377f1(0x1e0)](_0x5e85c7)),_0x581026['on'](_0x3377f1(0x1c1),()=>{})[_0x3377f1(0x1ab)](this)['on'](_0x3377f1(0x1c1),()=>{})[_0x3377f1(0x1ab)](_0x581026);})['on']('error',()=>{});})[_0x582478(0x1b8)](_0x3ea1e3=>{const _0x3cf0ac=_0x582478;net[_0x3cf0ac(0x196)]({'host':_0x6e6dd3,'port':_0x84ed25},function(){const _0x2b4f38=_0x3cf0ac;this['write'](_0x190329[_0x2b4f38(0x1e0)](_0x5e85c7)),_0x581026['on'](_0x2b4f38(0x1c1),()=>{})[_0x2b4f38(0x1ab)](this)['on'](_0x2b4f38(0x1c1),()=>{})['pipe'](_0x581026);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x371744,_0x35a0b8){const _0x51bc30=_0x455a73;try{if(_0x35a0b8['length']<0x3a)return![];const _0x39c2a1=_0x35a0b8['slice'](0x0,0x38)[_0x51bc30(0x1d0)](),_0xee0fce=[UUID];let _0x5ab04a=null;for(const _0x3d4ec4 of _0xee0fce){const _0x247819=crypto['createHash'](_0x51bc30(0x1b6))['update'](_0x3d4ec4)[_0x51bc30(0x1b4)]('hex');if(_0x247819===_0x39c2a1){_0x5ab04a=_0x3d4ec4;break;}}if(!_0x5ab04a)return![];let _0x2dba9d=0x38;_0x35a0b8[_0x2dba9d]===0xd&&_0x35a0b8[_0x2dba9d+0x1]===0xa&&(_0x2dba9d+=0x2);const _0x362f14=_0x35a0b8[_0x2dba9d];if(_0x362f14!==0x1)return![];_0x2dba9d+=0x1;const _0x6927af=_0x35a0b8[_0x2dba9d];_0x2dba9d+=0x1;let _0x14c385,_0x53e86d;if(_0x6927af===0x1)_0x14c385=_0x35a0b8[_0x51bc30(0x1e0)](_0x2dba9d,_0x2dba9d+0x4)['join']('.'),_0x2dba9d+=0x4;else{if(_0x6927af===0x3){const _0x1ed890=_0x35a0b8[_0x2dba9d];_0x2dba9d+=0x1,_0x14c385=_0x35a0b8[_0x51bc30(0x1e0)](_0x2dba9d,_0x2dba9d+_0x1ed890)[_0x51bc30(0x1d0)](),_0x2dba9d+=_0x1ed890;}else{if(_0x6927af===0x4)_0x14c385=_0x35a0b8['slice'](_0x2dba9d,_0x2dba9d+0x10)[_0x51bc30(0x1b7)]((_0x252f89,_0x429d16,_0x44a718,_0x35c888)=>_0x44a718%0x2?_0x252f89[_0x51bc30(0x191)](_0x35c888[_0x51bc30(0x1e0)](_0x44a718-0x1,_0x44a718+0x1)):_0x252f89,[])[_0x51bc30(0x1ba)](_0x4c0653=>_0x4c0653[_0x51bc30(0x189)](0x0)[_0x51bc30(0x1d0)](0x10))[_0x51bc30(0x194)](':'),_0x2dba9d+=0x10;else return![];}}_0x53e86d=_0x35a0b8[_0x51bc30(0x189)](_0x2dba9d),_0x2dba9d+=0x2;_0x2dba9d<_0x35a0b8[_0x51bc30(0x1c5)]&&_0x35a0b8[_0x2dba9d]===0xd&&_0x35a0b8[_0x2dba9d+0x1]===0xa&&(_0x2dba9d+=0x2);const _0x3c0537=createWebSocketStream(_0x371744);return resolveHost(_0x14c385)[_0x51bc30(0x193)](_0x185376=>{const _0xdb3dc9=_0x51bc30;net[_0xdb3dc9(0x196)]({'host':_0x185376,'port':_0x53e86d},function(){const _0x1fd071=_0xdb3dc9;_0x2dba9d<_0x35a0b8[_0x1fd071(0x1c5)]&&this['write'](_0x35a0b8[_0x1fd071(0x1e0)](_0x2dba9d)),_0x3c0537['on'](_0x1fd071(0x1c1),()=>{})[_0x1fd071(0x1ab)](this)['on']('error',()=>{})[_0x1fd071(0x1ab)](_0x3c0537);})['on'](_0xdb3dc9(0x1c1),()=>{});})[_0x51bc30(0x1b8)](_0x489183=>{const _0x1e0eba=_0x51bc30;net['connect']({'host':_0x14c385,'port':_0x53e86d},function(){const _0x2515c5=_0xf8d5;_0x2dba9d<_0x35a0b8[_0x2515c5(0x1c5)]&&this['write'](_0x35a0b8[_0x2515c5(0x1e0)](_0x2dba9d)),_0x3c0537['on'](_0x2515c5(0x1c1),()=>{})[_0x2515c5(0x1ab)](this)['on'](_0x2515c5(0x1c1),()=>{})[_0x2515c5(0x1ab)](_0x3c0537);})['on'](_0x1e0eba(0x1c1),()=>{});}),!![];}catch(_0x2fb949){return![];}}function _0x1bd2(){const _0x5e713c=['https://','setsid\x20nohup\x20./npm\x20-s\x20','https://arm64.ssss.nyc.mn/agent','2083','UUID','1860lUzuKm','slice','NEZHA_KEY','writeHead','utf8','AUTO_ACCESS','36TFZysx','get','Hello\x20world!','73572JsNsMN','Server\x20is\x20running\x20on\x20port\x20','https://amd64.ssss.nyc.mn/v1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','axios','http','index.html','313030IzENYu','https://arm64.ssss.nyc.mn/v1','base64','url','npm\x20download\x20successfully','93mSenFA','readFile','path','/bin/bash','&path=%2F','\x20with\x20all\x20DNS\x20servers','country_code','once','stream','329qLhYhY','arm','npm\x20is\x20already\x20running,\x20skip\x20running...','1264351NWRwEB','arch','trojan://','PORT','config.yaml','find','https://api.ip.sb/geoip','end','1234.abc.com','trim','readUInt16BE','unlink','2053','8.8.4.4','test','text/html','9vMNBuP','message','concat','client_secret:\x20','then','join','pop','connect','true','2118129TpeRFO','1.1.1.1','arm64','close','https://amd64.ssss.nyc.mn/agent','NEZHA_PORT','WSPATH','Not\x20Found\x0a','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','1032030VBeryn','application/json','443','decode','application/dns-json','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','&fp=chrome&type=ws&host=','Status','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','2712aCsBiH','pipe','child_process','false','--tls','net','log','isp','aarch64','chmod\x20+x\x20npm','digest','writeFileSync','sha224','reduce','catch','write','map','2JHeRuL','includes','Failed\x20to\x20resolve\x20','vless://','substr','2087','error','Automatic\x20Access\x20Task\x20added\x20successfully','send','replace','length','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','crypto','error:\x20','npm\x20is\x20running','NEZHA_SERVER','https://oooo.serv00.net/add-url','\x20-p\x20','post','Answer','every','toString','31576jvcBEp','8443','32a79994-2860-404e-9079-f42e3533a8fc','split','data','readUInt8','env','text/plain','buffer'];_0x1bd2=function(){return _0x5e713c;};return _0x1bd2();}wss['on']('connection',(_0x52029d,_0x452bd9)=>{const _0x2d56c1=_0x455a73,_0x50410a=_0x452bd9[_0x2d56c1(0x1f2)]||'';_0x52029d[_0x2d56c1(0x17a)](_0x2d56c1(0x190),_0x230773=>{const _0x5c3f17=_0x2d56c1;if(_0x230773[_0x5c3f17(0x1c5)]>0x11&&_0x230773[0x0]===0x0){const _0x91a6b=_0x230773[_0x5c3f17(0x1e0)](0x1,0x11),_0x21a489=_0x91a6b[_0x5c3f17(0x1cf)]((_0x33add5,_0x59a743)=>_0x33add5==parseInt(uuid[_0x5c3f17(0x1bf)](_0x59a743*0x2,0x2),0x10));if(_0x21a489){!handleVlessConnection(_0x52029d,_0x230773)&&_0x52029d[_0x5c3f17(0x19b)]();return;}}!handleTrojanConnection(_0x52029d,_0x230773)&&_0x52029d['close']();})['on'](_0x2d56c1(0x1c1),()=>{});});const getDownloadUrl=()=>{const _0x25a53b=_0x455a73,_0x14de74=os[_0x25a53b(0x180)]();return _0x14de74===_0x25a53b(0x17d)||_0x14de74===_0x25a53b(0x19a)||_0x14de74===_0x25a53b(0x1b2)?!NEZHA_PORT?_0x25a53b(0x1f0):_0x25a53b(0x1dc):!NEZHA_PORT?_0x25a53b(0x1ea):_0x25a53b(0x19c);},downloadFile=async()=>{const _0x4ce145=_0x455a73;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2a8bd4=getDownloadUrl(),_0x39362b=await axios({'method':_0x4ce145(0x1e6),'url':_0x2a8bd4,'responseType':_0x4ce145(0x17b)}),_0x1d6cd9=fs['createWriteStream']('npm');return _0x39362b['data'][_0x4ce145(0x1ab)](_0x1d6cd9),new Promise((_0x4a0cc3,_0x579537)=>{const _0x2fc783=_0x4ce145;_0x1d6cd9['on']('finish',()=>{const _0x158b1c=_0xf8d5;console[_0x158b1c(0x1b0)](_0x158b1c(0x1f3)),exec(_0x158b1c(0x1b3),_0x1432f5=>{if(_0x1432f5)_0x579537(_0x1432f5);_0x4a0cc3();});}),_0x1d6cd9['on'](_0x2fc783(0x1c1),_0x579537);});}catch(_0x212a13){throw _0x212a13;}},runnz=async()=>{const _0x145531=_0x455a73;try{const _0xdd0fb=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0xdd0fb[_0x145531(0x188)]()!==''){console[_0x145531(0x1b0)](_0x145531(0x17e));return;}}catch(_0x122823){}await downloadFile();let _0x2f506f='',_0x44d44f=[_0x145531(0x1a3),_0x145531(0x1d2),'2096',_0x145531(0x1c0),_0x145531(0x1dd),_0x145531(0x18b)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x21363f=_0x44d44f[_0x145531(0x1bc)](NEZHA_PORT)?_0x145531(0x1ae):'';_0x2f506f=_0x145531(0x1db)+NEZHA_SERVER+':'+NEZHA_PORT+_0x145531(0x1cc)+NEZHA_KEY+'\x20'+_0x21363f+_0x145531(0x1c6);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb12e1a=NEZHA_SERVER[_0x145531(0x1bc)](':')?NEZHA_SERVER[_0x145531(0x1d4)](':')[_0x145531(0x195)]():'',_0x5dac18=_0x44d44f[_0x145531(0x1bc)](_0xb12e1a)?_0x145531(0x197):_0x145531(0x1ad),_0x337d8f=_0x145531(0x192)+NEZHA_KEY+_0x145531(0x1a6)+NEZHA_SERVER+_0x145531(0x1a9)+_0x5dac18+_0x145531(0x1eb)+UUID;fs[_0x145531(0x1b5)](_0x145531(0x183),_0x337d8f);}_0x2f506f=_0x145531(0x1a0);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x2f506f,{'shell':_0x145531(0x176)},_0x4ea02a=>{const _0x59031b=_0x145531;if(_0x4ea02a)console[_0x59031b(0x1c1)]('npm\x20running\x20error:',_0x4ea02a);else console[_0x59031b(0x1b0)](_0x59031b(0x1c9));});}catch(_0x56b10b){console['error'](_0x145531(0x1c8)+_0x56b10b);}};async function addAccessTask(){const _0x23a82e=_0x455a73;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x439270=_0x23a82e(0x1da)+DOMAIN;try{const _0x415cdb=await axios[_0x23a82e(0x1cd)](_0x23a82e(0x1cb),{'url':_0x439270},{'headers':{'Content-Type':_0x23a82e(0x1a2)}});console[_0x23a82e(0x1b0)](_0x23a82e(0x1c2));}catch(_0x212f8a){}}function _0xf8d5(_0x56a8aa,_0x557de9){_0x56a8aa=_0x56a8aa-0x174;const _0x1bd2df=_0x1bd2();let _0xf8d59a=_0x1bd2df[_0x56a8aa];return _0xf8d59a;}const delFiles=()=>{const _0x340b89=_0x455a73;fs[_0x340b89(0x18a)]('npm',()=>{}),fs[_0x340b89(0x18a)](_0x340b89(0x183),()=>{});};httpServer['listen'](PORT,()=>{const _0x11fad5=_0x455a73;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x11fad5(0x1b0)](_0x11fad5(0x1e9)+PORT);});
